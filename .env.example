# ===========================================
# TIMEZONE AND LOCALIZATION
# ===========================================
# Set your timezone (https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)
GENERIC_TIMEZONE=America/New_York
TZ=America/New_York

# ===========================================
# N8N HOST AND PORT CONFIGURATION
# ===========================================
# The hostname or IP address n8n should use
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http

# The URL where n8n can be accessed (used for webhooks)
# For local development: http://localhost:5678
# For production: https://your-domain.com
WEBHOOK_URL=http://localhost:5678

# ===========================================
# SECURITY
# ===========================================
# IMPORTANT: Generate a unique encryption key
# You can generate one with: openssl rand -hex 32
N8N_ENCRYPTION_KEY=your-encryption-key-here-generate-a-strong-one

# File permissions enforcement
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true

# Security settings for Code and Git nodes
N8N_BLOCK_ENV_ACCESS_IN_NODE=false
N8N_GIT_NODE_DISABLE_BARE_REPOS=true

# ===========================================
# TASK RUNNER CONFIGURATION
# ===========================================
# Enable task runners for secure code execution
N8N_RUNNERS_ENABLED=true

# Runner mode: 'internal' or 'external'
# - internal: Runners as child processes (simpler, good for development)
# - external: Runners in separate containers (recommended for production)
N8N_RUNNERS_MODE=internal

# Enable native Python runner (beta feature)
N8N_NATIVE_PYTHON_RUNNER=true

# Allow external npm modules in Code nodes (comma-separated allowlist)
NODE_FUNCTION_ALLOW_EXTERNAL=axios,lodash,moment,uuid,csv-parse,csv-stringify

# ===========================================
# ADDITIONAL SETTINGS FOR EXTERNAL MODE
# ===========================================
# Uncomment these settings when using N8N_RUNNERS_MODE=external

# Allow broker to accept connections from other containers
# N8N_RUNNERS_BROKER_LISTEN_ADDRESS=0.0.0.0

# Shared secret for task runner authentication
# Generate with: openssl rand -hex 32
# N8N_RUNNERS_AUTH_TOKEN=your-secure-token-here

# Task runner container configuration
# Update container name based on your environment:
# - n8n-external-dev (development)
# - n8n-external-prod (production)
# N8N_RUNNERS_TASK_BROKER_URI=http://n8n-external-dev:5679

# Auto-shutdown timeout in seconds (0 = disabled)
# N8N_RUNNERS_AUTO_SHUTDOWN_TIMEOUT=15

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# Database type (postgresdb or sqlite)
DB_TYPE=postgresdb

# PostgreSQL Configuration
DB_POSTGRESDB_HOST=postgres
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=n8n
DB_POSTGRESDB_USER=n8n_user
DB_POSTGRESDB_PASSWORD=change-this-password
DB_POSTGRESDB_SCHEMA=public

# ===========================================
# EXECUTION SETTINGS
# ===========================================
# Save execution data on error (none, all)
EXECUTIONS_DATA_SAVE_ON_ERROR=all

# Save execution data on success (none, all)
EXECUTIONS_DATA_SAVE_ON_SUCCESS=all

# Save execution data while running
EXECUTIONS_DATA_SAVE_ON_PROGRESS=true

# Maximum age of execution data in hours
EXECUTIONS_DATA_MAX_AGE=168

# Enable automatic pruning of old executions
# EXECUTIONS_DATA_PRUNE=true

# ===========================================
# LOGGING
# ===========================================
# Log level (error, warn, info, verbose, debug)
N8N_LOG_LEVEL=info

# ===========================================
# ADDITIONAL FEATURES
# ===========================================
# Enable diagnostics and telemetry
N8N_DIAGNOSTICS_ENABLED=false

# Basic auth for n8n UI (username:password)
# N8N_BASIC_AUTH_ACTIVE=false
# N8N_BASIC_AUTH_USER=admin
# N8N_BASIC_AUTH_PASSWORD=password

# Disable telemetry
# N8N_DIAGNOSTICS_ENABLED=false
